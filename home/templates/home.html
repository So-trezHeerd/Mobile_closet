
{% include 'base.html'%}

<html>
  <head>
    <style>
        #columns{
            column-width:250px;
            column-gap: 15px;
          }
          #columns figure{
            display: inline-block;
            
            margin:0;
            margin-bottom: 15px;
            padding:10px;
            ;
          }
          #columns figure img{
            width:100%;
            border-radius: 8%;
            
          }
         
    </style>
  </head>
    {% block content %}
    {%load static%}
  <body>
    <div id="columns">
      
      {% for photo in photos.all %}
        <figure>
          <a href="{{ photo.imagedata.url }}">
            <img src="{{ photo.imagedata.url }}">
            
            
            <!--<button class="btn btn-link text-danger">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-suit-heart-fill" viewBox="0 0 16 16">
                  <path d="M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1z"/>
                </svg>
            </button> -->
          </a>
            <div class='toast' style='display:none'>
              <div id="message"></div>
            </div>   
          <button  onclick="photo_like(this.id)" id="{{ photo.id }}"> 
            좋아요</button>
        </figure>
         <!--<img src = "/:funding_product.avatar.url"/>-->
         

        {%endfor%}   
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.js"
    integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
      <script type="text/javascript">
        function photo_like(id) {
          console.log("hi")
          $.ajax({
          url: "{%url 'likes'%}", // data를 전송할 url 입니다.
          data: {
                'photo_id': id
            }, // photo_id 라는 name으로 id 값 전송
          dataType: "json",
          success: function (response) { // ajax 통신이 정상적으로 완료되었을 때
              console.log("like")
              $('#message').html(response.message) //id가 message의 내용을 전송받은 message로 바꾼다
              $('.toast').fadeIn(400).delay(100).fadeOut(400) //class가 toast인 것을 서서히 나타나게 하는 메서드입니다.
            }
          })
    }
</script>
  </body>
</html>

{% endblock %}


